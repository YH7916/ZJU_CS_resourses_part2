---选择题10*2--- 1. 10% 的指令 CPI 为 1，20% 的指令的 CPI 为 2，30% 的指令的 CPI 为 3，40% 的指令的 CPI 是 4，计算总的 CPI  2. 下面哪个运算结果不是NaN：A 是 0*infinity，B 是 infinity minus negative infinity，C 是 8 divided by 0，D 是任何涉及NaN的计算 3. 试卷开头的地方给了OpCode之类。问0xE2952023对应的指令是什么 4. 选出 -59.875 的单精度浮点数表示 5. IEEE754-2008定义了一种浮点数，1 bit sign，5 bit exponent，10 bit fraction，求其可以取值的范围 四个选项形状be like：正负1.0000 0000 0 * 2^-14 ~ 正负1.1111 1111 1 * 2^15 ，正负0，正负无穷，NaN 四个选项有区别浮点部分是9位还是10位、是2^-14~2^15还是2^-15~2^14 8. 在polling、DMA和interruption中，哪种要求processor与IO并行（或者都不需要） 9. 增大 cache 的 block size 可以减少什么，选项 A 是 conflict miss，B 是 hit time，C 是 miss penalty，D 是 compulsory miss *（这道题目去年也有类似的，这几个名词意思可以自己查查）* 10. seek time=8ms，转速7200RPM，每track有1000个sector，计算access time *（track sector应该是干扰项）* ---大题--- **第一题：**给branch load store指令占比以及Instruction miss rate、Data miss rate等，反正你见过的都有，求在它们共同作用下，CPI是多少 **第二题：**给出一段汇编代码，分析代码运行完成的时候，各寄存器的取值。 下面的内容是对这道题的模拟，大致是这个意思，不能保证题目正确、与原题目数值完全一致。作业或历年卷里面没见过特别像的题目。 Memory地址与内容：0x5004处内容为8，0x5008处内容为20，0x500C处内容为5 初始时刻x21寄存器的值为0x5004，x22寄存器的值为0x5，其余各寄存器值均为0 指令地址与内容： loop： 0x8000：slli x20, x10, 2 0x8004：addi x23, x21, x20 0x8008：lw x24, 0(x23) 0x800C：beq x24, x22, exit 0x8010：addi x10, x10, 1 0x8014：jal x1 loop exit： 没了 求最终的 x20、x23、x24、x1、PC **PageTableSize计算：** Virtual address 48 bit，DRAM 512GiB，SRAM 256GiB，PageSize 4 KiB，PageEntry 4 bytes （1）求5并行进程需要多大的PageTable （2）显然这个大小超出了内存可以容纳的范围，如果想要能塞进内存，PageSize应为多大 **流水线：**先给一张五级流水线CPU的图，再给一段汇编程序 I1：addi x5, x0, 1 I2：addi x6, x0, 1 I3：add x7, x5, x6 I4：add x5, x6, x7 I5：add x6, x7, x5 I6：add x7, x5, x6 …… 如是作无限循环 （1）这段程序是干啥的 （2）运行这段程序会在哪里发生hazard，在五级流水线没有任何针对hazard的改进的情况下，求CPI，为什么 （3）求用前递解决数据冲突之后的 CPI （4）分别问 I2 I3 I4 的两个操作数的前递来源，从ID/EX、EX/MEM、MEM/WB种选择 （5）给你一个新指令Jr r1, r2, imm，要求能实现r1<- PC+4，PC<- Memory[r2+imm]，指令的格式应当如何设计，参数都放到哪个位置，需要对流水线作何改动，在原图上改 **汇编：** （1）将0x0123456789ABCDEF存进x10 （2）C转汇编，int为64位，参数从x10传入，从x11传出 int sum ( int num ) {    if ( num < 10 )        return num ;    else return num%10 + sum( num/10 ) ; } *这几个10都是十进制的，我考试的时候除法指令忘记记了，一度以为题目的意思是十六进制* 最后一道**Cache**，25分， （1）一个有 64 块，每块 64 bytes 的cache，主存有 8192 块，问 tag index offset 各有几位 （2）给出一个Cache，no write allocate+write back，LRU，2-way set associative，width=2，32bit block，最开始时候四个格子里面有一个是已经有的，另外三个空着 给出10个读写操作，这串读写设计得颇为精微，我回忆不上来，总之练习的时候尽量多练一些情况吧 （2.1）写出每一步是hit还是miss，以及有没有Write Cache、Write Back、Hit Replacement *这里 Write Back 的意思是写回内存，Write Cache 的意思是直接往 Cache 里面写包括读出来修改（因为不采取 Write allocate 所以与平常练习的略有不同）* （2.2）问最终的cache状态，需要写出四个格子的dirty bit、Tag 和 对应内存的内容（如Memory[20-23]） ------- 选择题有些地方考挺偏的，根本想不到要复习；去年的和前年的回忆卷都有错误，要是不明白不用深究。 异常和中断好像没考，并行按照马德老师说的没考，IO是考了的（选择第10道） 复习时候推荐仔细做下作业的5.7，可以增进对cache的理解

第一道选择题是 10% 的指令 CPI 为 1，20% 的指令的 CPI 为 2，30% 的指令的 CPI 为 3，40% 的指令的 CPI 是 4，计算总的 CPI； 第四道选择题是选出 -59.875 的单精度浮点数表示； 第九道选择题是增大 cache 的 block size 可以减少什么，a 是 conflict miss，b 是 hit time，c 是 miss penalty，d 是 compulsory miss（这道题目去年也有类似的，这几个名词意思可以自己查查） 计算的第二题是给出一段汇编代码分析代码运行完成的时候部分相关寄存器的取值，大致意思是遍历一个数组，当值为 5 的时候跳出循环； 流水线的第三小问应该是用前递解决数据冲突之后的 CPI，第四问是一道表格题，分别问 I2 I3 I4 的两个操作数的来源，填 ID/EX EX/MEM MEM/WB，第五道题目还要求给出一部分信号的取值； Cache 部分总共有两问，第一问是一个有 64 块，每块 64 bytes 的 cache，主存有 8192 块，问 tag index offset 各有几位 5.2.2.1 的那四个项应该是 Hit Replacement Write Back Write Cache，这里 Write Cache 的意思是直接往 Cache 里面写包括读出来修改（因为不采取 Write allocate 所以与平常练习的略有不同）