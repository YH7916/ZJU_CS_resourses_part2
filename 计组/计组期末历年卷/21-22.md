# 2022期末回忆卷

 选择题

给机器码翻译成指令

给32位大立即数地址取出其中内容（lui+lw）

浮点数加法过程：0.12345*10^2 和 0.12345*10^(-2) 对齐后 10 的幂次是多少

四个选项选对的：

PTE 数=物理页数

增加 associativity 可以减少 capa miss

async bus 的概念

内存结构中耗时最多的是最上层

IEEE 754：1.355-2.105 用单精度浮点数表示

单周期的时候时钟周期完不成哪个工作(读并写内存)

TLB 有 tlb 的时候先看谁：tlb pgtbl cache phymem

RAID 是干啥的

cache 增大 block size 可以减少哪种 miss

write through 指什么

6 个 block，每个 block 4words，求 840 对应的 block 号



 大题

 1

(1) 把这6个数排序：在原码、补码、符号表示、IEEE754 下的 0xF0000000，在原码、补码下的 0xFFFFFFFF

(2) 不用别的寄存器，交换 x10 和 x11

(3) 书上IndexOutOfBound 那个例子，判断数组越界



 2 写汇编





C



运行代码



复制代码

1

2

3

4

5

6

7

8

9

10

11

12

13

14

15

16

17

18

void main(char *s,int *n){

​    char c,ch;

​    c = '3';

​    ch = '5';

​    *n = replace(*s,c,ch);

}

int replace(char *u,char c,char ch){

​    int i = 0;

​    while(u[i]!=0){

​        if(u[i]==c){

​            u[i]=ch;

​            break;

​        }

​        i++;

​    }

​    return i;

}

 3 cache(不确定完全一致)

(1) 32B 的 cache，一个 entry 8B，直接映射，write through+write around，给出如下访问：0 16 48 8 56 16 8 56 32 0 60，问每一次的index, tag, 是否hit

(注意 write around)

(2) 128B 的 cache，一个 entry 16B，2路组关联 LRU，write back，给出访问：64 32 64 0 112 64 128 48 240 0，问的跟上面一样，外加最后的dirty block number



 4 虚拟内存

页表大小，以及给定情况问 TLB 能不能容纳 8MiB 内存



 5 流水线

(1)先问了 sub 的时候除了 ALUOp 以外各个信号的值

给了一段代码，应该是

sub x5,x7,x11  ld x13, 0(x5)  ld x7,0(x2)  add x13,x5,x13  sd x13, 0(x5)

问：

(2) 如果没有 forward 和 hazard detection，在代码插 nop 使其能正确

(3) 如果有 forward 没有 hazard detection，干(2)的事

(4) 如果有 forward，写前7个时钟周期 ForwardA 和 ForwardB 的信号值



补充细节参考：
（1）给机器码判断汇编指令 （2）如何正确偏移 考lui lw ld（主要考ld的imm最多12位...吧我猜） （3）增大blocksize能减少哪一种miss （4）单周期CPU不能再同一个时钟周期进行的是 （5）... 简答题 1 简单问答吧  不用别的寄存器交换两个寄存器的值 用最少的指令判断if(a≥b且a<0)的条件 2 C语言转汇编 把字符串中的某一个字符转换成另一个字符的操作 3 cache 给地址判断miss/hit （1）直接映射 （2）两路组相联 4 pagetable&TLB （1）计算pagetable的物理内存 （2）pagesize为4KB，如果TLB只有64个entry，能不能支持一个至少访问8MB内存的程序。如果不能，pagesize需要多大。 5 流水线 （1）单周期写控制信号 （2）流水线没有前递和Hazard加空指令 （3）有前递但没有Hazard加空指令 （4）每一个时钟周期的ForwardA和ForwardB